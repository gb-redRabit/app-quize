(function(e){function t(t){for(var n,c,a=t[0],i=t[1],u=t[2],d=0,b=[];d<a.length;d++)c=a[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],n=!0,a=1;a<s.length;a++){var i=s[a];0!==r[i]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=s[0]))}return e}var n={},r={app:0},o=[];function c(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=e,c.c=n,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(s,n,function(t){return e[t]}.bind(null,n));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=i;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"11ec":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var n=s("7a23");const r={id:"app",class:"w-[100vw] flex flex-col items-center justify-start bg-gray-100 min-h-screen"};function o(e,t,s,o,c,a){const i=Object(n["y"])("Navbar"),u=Object(n["y"])("router-view");return Object(n["t"])(),Object(n["f"])("div",r,[a.showNavbar?(Object(n["t"])(),Object(n["d"])(i,{key:0})):Object(n["e"])(",!0),Object(n["i"])(u)])}const c={class:"w-full bg-white shadow flex items-center justify-between px-6 py-3 mb-6"},a={class:"flex items-center"},i={class:"ml-2 font-bold text-gray-800"},u={class:"flex gap-6"};function l(e,t,s,r,o,l){const d=Object(n["y"])("router-link");return Object(n["t"])(),Object(n["f"])("nav",c,[Object(n["g"])("div",a,[t[1]||(t[1]=Object(n["g"])("span",{class:"font-semibold text-blue-700"},"Zalogowany jako:",-1)),Object(n["g"])("span",i,Object(n["B"])(l.userName),1)]),Object(n["g"])("div",u,[Object(n["i"])(d,{to:"/",class:"hover:text-blue-600 font-medium"},{default:Object(n["G"])(()=>t[2]||(t[2]=[Object(n["h"])("Strona główna")])),_:1,__:[2]}),Object(n["i"])(d,{to:"/history",class:"hover:text-blue-600 font-medium"},{default:Object(n["G"])(()=>t[3]||(t[3]=[Object(n["h"])("Historia")])),_:1,__:[3]}),Object(n["i"])(d,{to:"/admin",class:"hover:text-blue-600 font-medium"},{default:Object(n["G"])(()=>t[4]||(t[4]=[Object(n["h"])("Panel administracyjny")])),_:1,__:[4]})]),Object(n["g"])("button",{onClick:t[0]||(t[0]=(...e)=>l.logout&&l.logout(...e)),class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded font-semibold"}," Wyloguj ")])}var d=s("5502"),b={computed:{...Object(d["c"])(["getUser"]),userName(){return this.getUser&&this.getUser.login?this.getUser.login:"nieznany"}},methods:{logout(){this.$store.dispatch("logout"),this.$router.push({name:"Login"})}}},h=s("6b0d"),g=s.n(h);const j=g()(b,[["render",l]]);var O=j,w={components:{Navbar:O},computed:{...Object(d["c"])(["isAuthenticated"]),showNavbar(){return this.isAuthenticated&&"Login"!==this.$route.name}}};s("e69a");const m=g()(w,[["render",o]]);var f=m,p=s("6605");const x={class:"flex flex-col items-center justify-center bg-gray-100"},y={class:"bg-white/80 rounded-2xl flex flex-col items-center max-w-lg w-full"},v={class:"w-full mb-4"},S=["value"];function I(e,t,s,r,o,c){const a=Object(n["y"])("router-link");return Object(n["t"])(),Object(n["f"])("div",x,[Object(n["g"])("div",y,[t[4]||(t[4]=Object(n["g"])("h1",{class:"text-5xl font-extrabold mb-4 text-blue-700 tracking-tight drop-shadow-lg text-center"}," Quiz App ",-1)),t[5]||(t[5]=Object(n["g"])("p",{class:"text-lg mb-8 text-gray-700 text-center"}," Sprawdź swoją wiedzę w nowoczesnym quizie! Wybierz tryb i zacznij już teraz. ",-1)),Object(n["g"])("div",v,[t[1]||(t[1]=Object(n["g"])("label",{class:"block mb-2 text-gray-700 font-medium text-center"}," Ile pytań chcesz w quizie? ",-1)),Object(n["H"])(Object(n["g"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedLength=e),class:"w-full p-2 rounded border border-gray-300 text-lg"},[(Object(n["t"])(),Object(n["f"])(n["a"],null,Object(n["x"])([10,20,50,100,150,200,250],e=>Object(n["g"])("option",{key:e,value:e},Object(n["B"])(e),9,S)),64))],512),[[n["D"],o.selectedLength]])]),Object(n["i"])(a,{to:{name:"QuizView",query:{length:o.selectedLength}},class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg text-xl font-semibold shadow transition mb-4 text-center"},{default:Object(n["G"])(()=>t[2]||(t[2]=[Object(n["h"])(" Rozpocznij Quiz ")])),_:1,__:[2]},8,["to"]),Object(n["i"])(a,{to:"/exam",class:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg text-lg font-semibold shadow transition mb-4 text-center"},{default:Object(n["G"])(()=>t[3]||(t[3]=[Object(n["h"])(" Egzamin 150 pytań (1h) ")])),_:1,__:[3]})])])}var _={name:"Home",data(){return{selectedLength:10}}};const q=g()(_,[["render",I]]);var Q=q;const k={class:"flex flex-col items-center justify-center bg-gray-100"},T={class:"w-full max-w-7xl min-w-[600px] bg-white rounded-lg shadow-lg p-8 flex flex-col gap-8"},z={key:0,class:"flex-1 flex flex-col"},E={key:0,class:"text-lg"},B={key:1},A={key:1,class:"mt-4 text-center"},L={key:0,class:"text-green-600 font-bold text-xl"},C={key:1,class:"text-red-600 font-bold text-xl"},H={class:"mt-4 text-gray-700 text-base font-medium bg-gray-100 rounded p-3 min-h-[60px] min-w-max flex items-center justify-center"},U={class:"flex justify-between items-center mt-8"},N=["disabled"],D=["disabled"],P={key:1},M={class:"mb-4"},R={class:"space-y-6"},$={class:"font-semibold mb-2"},G={key:0},V={class:"text-green-700 font-bold"},F={key:1},J={class:"mt-2 text-gray-700 text-base font-medium bg-gray-100 rounded p-3"},W={class:"w-full flex flex-col items-center mt-8"},Y={class:"flex flex-wrap gap-3 justify-center w-full max-w-5xl"},Z=["onClick","aria-current","title","disabled"];function K(e,t,s,r,o,c){const a=Object(n["y"])("QuestionList");return Object(n["t"])(),Object(n["f"])("div",k,[Object(n["g"])("div",T,[o.showSummary?(Object(n["t"])(),Object(n["f"])("div",P,[t[6]||(t[6]=Object(n["g"])("h2",{class:"text-2xl mb-2"},"Podsumowanie testu",-1)),Object(n["g"])("p",M,"Twój wynik: "+Object(n["B"])(o.score)+" / "+Object(n["B"])(o.questions.length),1),Object(n["g"])("div",R,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(o.questions,(e,s)=>(Object(n["t"])(),Object(n["f"])("div",{key:s,class:"border rounded-lg p-4"},[Object(n["g"])("div",$,Object(n["B"])(s+1)+". "+Object(n["B"])(e.question),1),o.answersStatus[s].correct?(Object(n["t"])(),Object(n["f"])("div",G,[Object(n["g"])("span",V,"✔ "+Object(n["B"])(c.correctAnswerText(e)),1)])):(Object(n["t"])(),Object(n["f"])("div",F,[Object(n["g"])("div",null,[t[4]||(t[4]=Object(n["g"])("span",{class:"text-red-700 font-bold"},"Twoja odpowiedź: ",-1)),Object(n["g"])("span",null,Object(n["B"])(c.userAnswerText(e,o.answersStatus[s].selected)),1)]),Object(n["g"])("div",null,[t[5]||(t[5]=Object(n["g"])("span",{class:"text-green-700 font-bold"},"Prawidłowa odpowiedź: ",-1)),Object(n["g"])("span",null,Object(n["B"])(c.correctAnswerText(e)),1)])])),Object(n["g"])("div",J,Object(n["B"])(e.description),1)]))),128))]),Object(n["g"])("button",{class:"bg-green-500 text-white p-2 rounded mt-8",onClick:t[2]||(t[2]=(...e)=>c.restartQuiz&&c.restartQuiz(...e))}," Rozpocznij ponownie ")])):(Object(n["t"])(),Object(n["f"])("div",z,[t[3]||(t[3]=Object(n["g"])("h1",{class:"text-3xl font-bold mb-6 text-center"},"Quiz Application",-1)),o.loading?(Object(n["t"])(),Object(n["f"])("div",E,"Loading questions...")):(Object(n["t"])(),Object(n["f"])("div",B,[o.questions.length&&o.currentQuestionIndex<o.questions.length?(Object(n["t"])(),Object(n["d"])(a,{key:0,question:o.questions[o.currentQuestionIndex],answered:!!(o.answersStatus.length>o.currentQuestionIndex&&o.answersStatus[o.currentQuestionIndex])&&o.answersStatus[o.currentQuestionIndex].answered,selected:o.answersStatus.length>o.currentQuestionIndex&&o.answersStatus[o.currentQuestionIndex]?o.answersStatus[o.currentQuestionIndex].selected:null,showCorrect:!0,onSelect:c.selectAnswer},null,8,["question","answered","selected","onSelect"])):Object(n["e"])(",!0),o.answersStatus.length>o.currentQuestionIndex&&o.answersStatus[o.currentQuestionIndex]&&o.answersStatus[o.currentQuestionIndex].answered?(Object(n["t"])(),Object(n["f"])("div",A,[o.answersStatus[o.currentQuestionIndex].correct?(Object(n["t"])(),Object(n["f"])("span",L,"Dobra odpowiedź!")):(Object(n["t"])(),Object(n["f"])("span",C,"Zła odpowiedź!")),Object(n["g"])("div",H,[Object(n["g"])("span",null,Object(n["B"])(o.questions[o.currentQuestionIndex].description),1)])])):Object(n["e"])(",!0)])),Object(n["g"])("div",U,[Object(n["g"])("button",{class:"bg-gray-400 text-white px-6 py-3 rounded text-lg",onClick:t[0]||(t[0]=(...e)=>c.prevQuestion&&c.prevQuestion(...e)),disabled:0===o.currentQuestionIndex}," ← Poprzednie ",8,N),Object(n["g"])("button",{class:"bg-blue-500 text-white px-6 py-3 rounded text-lg",onClick:t[1]||(t[1]=(...e)=>c.nextOrFinish&&c.nextOrFinish(...e)),disabled:!(o.answersStatus[o.currentQuestionIndex]&&o.answersStatus[o.currentQuestionIndex].answered)},Object(n["B"])(o.currentQuestionIndex===o.questions.length-1?"Zakończ test":"Następne →"),9,D)])]))]),Object(n["g"])("div",W,[t[7]||(t[7]=Object(n["g"])("div",{class:"mb-2 font-semibold text-lg"},"Pytania",-1)),Object(n["g"])("div",Y,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(o.questions,(e,t)=>(Object(n["t"])(),Object(n["f"])("button",{key:t,onClick:e=>c.goToQuestion(t),class:Object(n["p"])(["w-12 h-12 rounded-full border-2 flex items-center justify-center text-lg font-bold transition-colors duration-200",c.questionNavClass(t)]),"aria-current":o.currentQuestionIndex===t?"true":void 0,title:e.question,disabled:o.showSummary},Object(n["B"])(t+1),11,Z))),128))])])])}var X=s("bc3a"),ee=s.n(X);const te={class:"text-2xl mb-6 font-semibold"},se={class:"flex flex-col w-full"},ne=["onClick","disabled"],re={class:"text-left"};function oe(e,t,s,r,o,c){return Object(n["t"])(),Object(n["f"])("div",null,[Object(n["g"])("h2",te,Object(n["B"])(s.question.question)+"?",1),Object(n["g"])("div",se,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(c.answersList,(e,t)=>(Object(n["t"])(),Object(n["f"])("button",{key:t,class:Object(n["p"])(["p-4 rounded mb-4 border text-lg transition-colors flex items-center",c.buttonClass(t)]),onClick:e=>c.onSelect(t),disabled:s.answered},[Object(n["g"])("span",{class:Object(n["p"])(["mr-4 flex items-center justify-center w-10 h-10 rounded-full border-2 bg-white font-bold text-xl",c.letterClass(t)])},Object(n["B"])(c.answerLetter(t)),3),Object(n["g"])("span",re,Object(n["B"])(e),1)],10,ne))),128))])])}var ce={props:{question:{type:Object,required:!0},answered:{type:Boolean,default:!1},selected:{type:Number,default:null},showCorrect:{type:Boolean,default:!1}},emits:["select"],computed:{answersList(){return["answer_a","answer_b","answer_c","answer_d"].map(e=>this.question[e]).filter(Boolean).map(e=>"object"===typeof e?e.answer||":e)},correctIndex(){const e=["answer_a","answer_b","answer_c","answer_d"];return e.findIndex(e=>this.question[e]&&this.question[e].isCorret)}},methods:{onSelect(e){this.$emit("select",e)},buttonClass(e){return this.answered?this.showCorrect&&e===this.correctIndex?"bg-green-500 text-white":e===this.selected?"bg-red-500 text-white":"bg-gray-200 text-gray-700":"bg-blue-500 text-white"},letterClass(e){return this.answered?this.showCorrect&&e===this.correctIndex?"border-green-500 text-green-500":e===this.selected?"border-red-500 text-red-500":"border-gray-400 text-gray-400":"border-blue-500 text-blue-500"},answerLetter(e){return String.fromCharCode(65+e)}}};const ae=g()(ce,[["render",oe]]);var ie=ae;function ue(e,t){const s=e.filter(e=>e.question),n=s.map(e=>({q:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({q:e})=>e);return n.slice(0,Math.min(t,n.length))}var le={components:{QuestionList:ie},data(){return{questions:[],currentQuestionIndex:0,score:0,loading:!0,answersStatus:[],quizLength:10,showSummary:!1}},created(){const e=parseInt(this.$route.query.length,10);e&&!isNaN(e)&&(this.quizLength=e),this.fetchQuestions()},methods:{...Object(d["b"])(["fetchUserHistory"]),async fetchQuestions(){try{this.loading=!0;const e=await ee.a.get("/api/questions");this.questions=ue(e.data,this.quizLength),this.answersStatus=this.questions.map(()=>({answered:!1,correct:!1,selected:null})),this.loading=!1,this.showSummary=!1,this.score=0,this.currentQuestionIndex=0}catch(e){console.error("Error fetching questions:",e)}},selectAnswer(e){if(this.answersStatus[this.currentQuestionIndex].answered)return;const t=this.questions[this.currentQuestionIndex],s=["answer_a","answer_b","answer_c","answer_d"],n=s.findIndex(e=>t[e]&&t[e].isCorret),r=e===n;r&&this.score++,this.answersStatus[this.currentQuestionIndex]={answered:!0,correct:r,selected:e}},async nextOrFinish(){this.currentQuestionIndex<this.questions.length-1?this.currentQuestionIndex++:(this.showSummary=!0,await this.saveUserHistory())},async saveUserHistory(){try{const e=localStorage.getItem("token");if(!e)return void alert("Brak tokena JWT – zaloguj się ponownie!");const t=this.questions.map((e,t)=>({id_questions:e.ID||e.id||e.Id||e.id_question,answer:this.userAnswerLetter(e,this.answersStatus[t].selected)})),s=this.answersStatus.filter(e=>e.correct).length,n=this.answersStatus.filter(e=>e.answered&&!e.correct).length;await ee.a.put("/api/users/update",{data:(new Date).toISOString(),list:t,correct:s,wrong:n,type:"quiz"},{headers:{Authorization:"Bearer "+e}}),await this.fetchUserHistory()}catch(e){alert("Błąd zapisu historii: "+e.message),console.error("Błąd zapisu historii:",e)}},userAnswerLetter(e,t){return null==t?":0===t?"A":1===t?"B":2===t?"C":3===t?"D":"},prevQuestion(){this.currentQuestionIndex>0&&this.currentQuestionIndex--},goToQuestion(e){this.showSummary||(this.currentQuestionIndex=e)},restartQuiz(){this.currentQuestionIndex=0,this.score=0,this.loading=!0,this.fetchQuestions()},questionNavClass(e){const t=this.answersStatus[e];return t.answered&&t.correct?"bg-green-500 text-white":t.answered&&!t.correct?"bg-red-500 text-white":"bg-white text-gray-800"},userAnswerText(e,t){const s=["answer_a","answer_b","answer_c","answer_d"],n=s[t];return e[n]&&e[n].answer?e[n].answer:"},correctAnswerText(e){const t=["answer_a","answer_b","answer_c","answer_d"],s=t.findIndex(t=>e[t]&&e[t].isCorret);return-1!==s&&e[t[s]]&&e[t[s]].answer?e[t[s]].answer:"}}};const de=g()(le,[["render",K]]);var be=de;const he={class:"container mx-auto p-4 bg-gray-100 min-h-screen"},ge={class:"mb-4"},je={class:"min-w-full bg-white border border-gray-300"},Oe={class:"py-2 px-4 border-b"},we={class:"py-2 px-4 border-b"},me={class:"py-2 px-4 border-b"},fe=["onClick"];function pe(e,t,s,r,o,c){const a=Object(n["y"])("router-link");return Object(n["t"])(),Object(n["f"])("div",he,[t[3]||(t[3]=Object(n["g"])("h1",{class:"text-2xl font-bold mb-4"},"Admin Panel",-1)),Object(n["g"])("div",ge,[Object(n["i"])(a,{to:"/admin/add",class:"bg-blue-500 text-white px-4 py-2 rounded"},{default:Object(n["G"])(()=>t[0]||(t[0]=[Object(n["h"])("Add Question")])),_:1,__:[0]})]),Object(n["g"])("table",je,[t[2]||(t[2]=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",{class:"py-2 px-4 border-b"},"ID"),Object(n["g"])("th",{class:"py-2 px-4 border-b"},"Description"),Object(n["g"])("th",{class:"py-2 px-4 border-b"},"Actions")])],-1)),Object(n["g"])("tbody",null,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(o.questions,e=>(Object(n["t"])(),Object(n["f"])("tr",{key:e.id},[Object(n["g"])("td",Oe,Object(n["B"])(e.id),1),Object(n["g"])("td",we,Object(n["B"])(e.description),1),Object(n["g"])("td",me,[Object(n["i"])(a,{to:"/admin/edit/"+e.id,class:"text-blue-500"},{default:Object(n["G"])(()=>t[1]||(t[1]=[Object(n["h"])("Edit")])),_:2,__:[1]},1032,["to"]),Object(n["g"])("button",{onClick:t=>c.deleteQuestion(e.id),class:"text-red-500 ml-2"}," Delete ",8,fe)])]))),128))])])])}var xe={data(){return{questions:[]}},created(){this.fetchQuestions()},methods:{async fetchQuestions(){try{const e=await ee.a.get("/api/questions");this.questions=e.data}catch(e){console.error("Error fetching questions:",e)}},async deleteQuestion(e){if(confirm("Are you sure you want to delete this question?"))try{await ee.a.delete("/api/questions/"+e),this.fetchQuestions()}catch(t){console.error("Error deleting question:",t)}}}};s("b18b");const ye=g()(xe,[["render",pe],["__scopeId","data-v-6da7f1a6"]]);var ve=ye;const Se={class:"flex items-center justify-center h-screen"};function Ie(e,t,s,r,o,c){return Object(n["t"])(),Object(n["f"])("div",Se,t[0]||(t[0]=[Object(n["g"])("h1",{class:"text-4xl font-bold text-red-600"},"404 - Not Found",-1)]))}var _e={name:"NotFound"};const qe=g()(_e,[["render",Ie]]);var Qe=qe;const ke={class:"flex items-center justify-center min-h-screen bg-gray-100"},Te={class:"mb-4"},ze={class:"mb-4"},Ee={key:0,class:"mt-4 text-red-500 text-sm"};function Be(e,t,s,r,o,c){return Object(n["t"])(),Object(n["f"])("div",ke,[Object(n["g"])("form",{onSubmit:t[2]||(t[2]=Object(n["I"])((...e)=>c.handleLogin&&c.handleLogin(...e),["prevent"])),class:"bg-white p-6 rounded shadow-md w-80"},[t[5]||(t[5]=Object(n["g"])("h2",{class:"text-2xl font-bold mb-4 text-center"},"Login",-1)),Object(n["g"])("div",Te,[t[3]||(t[3]=Object(n["g"])("label",{for:"login",class:"block text-sm font-medium text-gray-700"},"Login",-1)),Object(n["H"])(Object(n["g"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.loginInput=e),id:"login",required:",class:"mt-1 block w-full p-2 border border-gray-300 rounded"},null,512),[[n["E"],o.loginInput]])]),Object(n["g"])("div",ze,[t[4]||(t[4]=Object(n["g"])("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),Object(n["H"])(Object(n["g"])("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),id:"password",required:",class:"mt-1 block w-full p-2 border border-gray-300 rounded"},null,512),[[n["E"],o.password]])]),t[6]||(t[6]=Object(n["g"])("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600"}," Login ",-1)),o.errorMessage?(Object(n["t"])(),Object(n["f"])("p",Ee,Object(n["B"])(o.errorMessage),1)):Object(n["e"])(",!0)],32)])}var Ae={data(){return{loginInput:",password:",errorMessage:"}},methods:{...Object(d["b"])(["login"]),async handleLogin(){try{await this.login({login:this.loginInput,password:this.password});this.$router.push({name:"Home"})}catch(e){this.errorMessage="Login failed."}}}};const Le=g()(Ae,[["render",Be]]);var Ce=Le;const He={class:"container mx-auto p-4"},Ue={key:0,class:"text-gray-500"},Ne={key:1,class:"space-y-4"},De={class:"font-semibold"},Pe={class:"ml-2 px-2 py-1 rounded text-xs"},Me={class:"text-green-600 font-bold"},Re={class:"ml-4 text-red-600 font-bold"},$e={class:"mt-2"};function Ge(e,t,s,r,o,c){return Object(n["t"])(),Object(n["f"])("div",He,[t[0]||(t[0]=Object(n["g"])("h1",{class:"text-2xl font-bold mb-4"},"Your Quiz History",-1)),0===c.history.length?(Object(n["t"])(),Object(n["f"])("div",Ue," No quiz history available. ")):(Object(n["t"])(),Object(n["f"])("ul",Ne,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(c.history,e=>(Object(n["t"])(),Object(n["f"])("li",{key:e.data,class:"border p-4 rounded-lg shadow"},[Object(n["g"])("h2",De,[Object(n["h"])(" Data: "+Object(n["B"])(new Date(e.data).toLocaleString())+" ",1),Object(n["g"])("span",Pe,Object(n["B"])("egzamin"===e.type?"Egzamin":"Quiz"),1)]),Object(n["g"])("div",null,[Object(n["g"])("span",Me,"Poprawnych: "+Object(n["B"])(e.correct||0),1),Object(n["g"])("span",Re,"Błędnych: "+Object(n["B"])(e.wrong||0),1)]),Object(n["g"])("ul",$e,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(e.list,e=>(Object(n["t"])(),Object(n["f"])("li",{key:e.id_questions}," Question ID: "+Object(n["B"])(e.id_questions)+" - Answer: "+Object(n["B"])(e.answer),1))),128))])]))),128))]))])}var Ve={name:"History",computed:{...Object(d["d"])(["user"]),history(){return this.user.history||[]}},methods:{...Object(d["b"])(["fetchUserHistory"])},async created(){await this.fetchUserHistory()}};s("8091");const Fe=g()(Ve,[["render",Ge],["__scopeId","data-v-388449b6"]]);var Je=Fe;const We={class:"flex flex-col items-center justify-center bg-gray-100"},Ye={class:"w-full max-w-3xl min-w-[600px] bg-white rounded-lg shadow-lg p-8 flex flex-col gap-8"},Ze={key:0},Ke={class:"flex justify-between items-center mb-4"},Xe={class:"text-lg font-semibold"},et={class:"text-lg font-semibold text-blue-700"},tt={key:0,class:"text-lg"},st={key:1},nt={key:1},rt={class:"mb-4"},ot={class:"space-y-6"},ct={class:"font-semibold mb-2"};function at(e,t,s,r,o,c){const a=Object(n["y"])("QuestionList");return Object(n["t"])(),Object(n["f"])("div",We,[Object(n["g"])("div",Ye,[o.showSummary?(Object(n["t"])(),Object(n["f"])("div",nt,[t[3]||(t[3]=Object(n["g"])("h2",{class:"text-2xl mb-2"},"Podsumowanie egzaminu",-1)),Object(n["g"])("p",rt,"Twój wynik: "+Object(n["B"])(o.score)+" / 150",1),Object(n["g"])("div",ot,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(o.questions,(e,s)=>(Object(n["t"])(),Object(n["f"])("div",{key:s,class:"border rounded-lg p-4"},[Object(n["g"])("div",ct,Object(n["B"])(s+1)+". "+Object(n["B"])(e.question),1),Object(n["g"])("div",null,[t[2]||(t[2]=Object(n["g"])("span",{class:"font-bold"},"Twoja odpowiedź: ",-1)),Object(n["g"])("span",null,Object(n["B"])(c.userAnswerText(e,o.answersStatus[s].selected)),1)])]))),128))]),Object(n["g"])("button",{class:"bg-green-500 text-white p-2 rounded mt-8",onClick:t[0]||(t[0]=(...e)=>c.restartExam&&c.restartExam(...e))}," Rozpocznij ponownie ")])):(Object(n["t"])(),Object(n["f"])("div",Ze,[t[1]||(t[1]=Object(n["g"])("h1",{class:"text-3xl font-bold mb-6 text-center"},"Egzamin – 150 pytań",-1)),Object(n["g"])("div",Ke,[Object(n["g"])("span",Xe,"Pytanie "+Object(n["B"])(o.currentQuestionIndex+1)+" / 150",1),Object(n["g"])("span",et,"Pozostały czas: "+Object(n["B"])(c.formattedTime),1)]),o.loading?(Object(n["t"])(),Object(n["f"])("div",tt,"Ładowanie pytań...")):(Object(n["t"])(),Object(n["f"])("div",st,[o.questions.length&&o.currentQuestionIndex<o.questions.length?(Object(n["t"])(),Object(n["d"])(a,{key:0,question:o.questions[o.currentQuestionIndex],answered:!!(o.answersStatus.length>o.currentQuestionIndex&&o.answersStatus[o.currentQuestionIndex])&&o.answersStatus[o.currentQuestionIndex].answered,selected:o.answersStatus.length>o.currentQuestionIndex&&o.answersStatus[o.currentQuestionIndex]?o.answersStatus[o.currentQuestionIndex].selected:null,showCorrect:!1,onSelect:c.selectAnswer},null,8,["question","answered","selected","onSelect"])):Object(n["e"])(",!0)]))]))])])}var it={components:{QuestionList:ie},data(){return{questions:[],currentQuestionIndex:0,score:0,loading:!0,answersStatus:[],showSummary:!1,timeLeft:3600,timer:null}},computed:{formattedTime(){const e=Math.floor(this.timeLeft/60).toString().padStart(2,"0"),t=(this.timeLeft%60).toString().padStart(2,"0");return`${e}:${t}`}},created(){this.fetchQuestions(),this.startTimer()},methods:{...Object(d["b"])(["fetchUserHistory"]),async fetchQuestions(){try{this.loading=!0;const e=await ee.a.get("/api/questions");this.questions=ue(e.data,150),this.answersStatus=this.questions.map(()=>({answered:!1,selected:null})),this.loading=!1,this.showSummary=!1,this.score=0,this.currentQuestionIndex=0}catch(e){console.error("Error fetching questions:",e)}},async selectAnswer(e){this.answersStatus[this.currentQuestionIndex].answered||(this.answersStatus[this.currentQuestionIndex]={answered:!0,selected:e},setTimeout(async()=>{this.currentQuestionIndex<this.questions.length-1?this.currentQuestionIndex++:(this.showSummary=!0,clearInterval(this.timer),this.countScore(),await this.saveExamHistory())},300))},countScore(){this.score=this.answersStatus.reduce((e,t,s)=>{const n=this.questions[s],r=["answer_a","answer_b","answer_c","answer_d"],o=r.findIndex(e=>n[e]&&n[e].isCorret);return e+(t.selected===o?1:0)},0)},userAnswerText(e,t){const s=["answer_a","answer_b","answer_c","answer_d"],n=s[t];return e[n]&&e[n].answer?e[n].answer:"},restartExam(){this.timeLeft=3600,this.fetchQuestions(),this.startTimer()},startTimer(){clearInterval(this.timer),this.timer=setInterval(()=>{this.timeLeft>0?this.timeLeft--:(clearInterval(this.timer),this.showSummary=!0,this.countScore())},1e3)},async saveExamHistory(){try{const e=localStorage.getItem("token");if(!e)return;const t=this.questions.map((e,t)=>({id_questions:e.ID||e.id||e.Id||e.id_question,answer:this.userAnswerLetter(e,this.answersStatus[t].selected)})),s=this.answersStatus.reduce((e,t,s)=>{const n=this.questions[s],r=["answer_a","answer_b","answer_c","answer_d"],o=r.findIndex(e=>n[e]&&n[e].isCorret);return e+(t.selected===o?1:0)},0),n=this.answersStatus.length-s;await ee.a.put("/api/users/update",{data:(new Date).toISOString(),list:t,correct:s,wrong:n,type:"egzamin"},{headers:{Authorization:"Bearer "+e}}),await this.fetchUserHistory()}catch(e){console.error("Błąd zapisu historii egzaminu:",e)}},userAnswerLetter(e,t){return null==t?":0===t?"A":1===t?"B":2===t?"C":3===t?"D":"}}};const ut=g()(it,[["render",at]]);var lt=ut;const dt=[{path:"/",name:"Home",component:Q},{path:"/quiz",name:"QuizView",component:be},{path:"/admin",name:"AdminView",component:ve,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Ce},{path:"/history",name:"History",component:Je,meta:{requiresAuth:!0}},{path:"/exam",name:"ExamView",component:lt},{path:"/:pathMatch(.*)*",name:"NotFound",component:Qe}],bt=Object(p["a"])({history:Object(p["b"])("/"),routes:dt});bt.beforeEach((e,t,s)=>{const n=!!localStorage.getItem("user");"Login"===e.name||n?"Login"===e.name&&n?s({name:"Home"}):s():s({name:"Login"})});var ht=bt;const gt=Object(d["a"])({state:{questions:[],userHistory:[],isAuthenticated:!1,user:null},mutations:{SET_QUESTIONS(e,t){e.questions=t},SET_USER_HISTORY(e,t){e.userHistory=t},SET_AUTHENTICATED(e,t){e.isAuthenticated=t},SET_USER(e,t){e.user=t}},actions:{async fetchQuestions({commit:e}){const t=await ee.a.get("/api/questions");e("SET_QUESTIONS",t.data)},async fetchUserHistory({commit:e}){const t=await ee.a.get("/api/users/history",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),s=JSON.parse(localStorage.getItem("user"))||{};s.history=t.data,e("SET_USER",s),e("SET_USER_HISTORY",t.data)},async login({commit:e},t){const s=await ee.a.post("/api/auth/login",t);console.log("Backend response:",s.data),e("SET_AUTHENTICATED",!0),e("SET_USER",s.data.user),localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))},async logout({commit:e}){await ee.a.post("/api/auth/logout"),e("SET_AUTHENTICATED",!1),e("SET_USER",null),localStorage.removeItem("token"),localStorage.removeItem("user")}},getters:{getQuestions:e=>e.questions,getUserHistory:e=>e.userHistory,isAuthenticated:e=>e.isAuthenticated,getUser:e=>e.user}}),jt=localStorage.getItem("user");jt&&(gt.commit("SET_USER",JSON.parse(jt)),gt.commit("SET_AUTHENTICATED",!0));var Ot=gt;s("ba8c");Object(n["c"])(f).use(ht).use(Ot).mount("#app")},"5e1b":function(e,t,s){},8091:function(e,t,s){"use strict";s("11ec")},b18b:function(e,t,s){"use strict";s("5e1b")},ba8c:function(e,t,s){},d3e5:function(e,t,s){},e69a:function(e,t,s){"use strict";s("d3e5")}});
//# sourceMappingURL=app.827ffc5f.js.map